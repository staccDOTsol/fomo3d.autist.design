{"version":3,"file":"AuctionHouseClient.cjs","sources":["../../../../src/plugins/auctionHouseModule/AuctionHouseClient.ts"],"sourcesContent":["import type { Metaplex } from '@/Metaplex';\nimport { findAuctionHousePda } from '@/programs';\nimport { Task } from '@/utils';\nimport type { Commitment, PublicKey } from '@solana/web3.js';\nimport { AuctionHouse } from './AuctionHouse';\nimport { AuctionHouseBuildersClient } from './AuctionHouseBuildersClient';\nimport {\n  CreateAuctionHouseInput,\n  createAuctionHouseOperation,\n  CreateAuctionHouseOutput,\n} from './createAuctionHouse';\nimport { findAuctionHouseByAddressOperation } from './findAuctionHouseByAddress';\nimport {\n  UpdateAuctionHouseInput,\n  updateAuctionHouseOperation,\n  UpdateAuctionHouseOutput,\n} from './updateAuctionHouse';\n\nexport class AuctionHouseClient {\n  constructor(protected readonly metaplex: Metaplex) {}\n\n  builders() {\n    return new AuctionHouseBuildersClient(this.metaplex);\n  }\n\n  createAuctionHouse(input: CreateAuctionHouseInput): Task<\n    Omit<CreateAuctionHouseOutput, 'auctionHouse'> & {\n      auctionHouse: AuctionHouse;\n    }\n  > {\n    return new Task(async (scope) => {\n      const output = await this.metaplex\n        .operations()\n        .getTask(createAuctionHouseOperation(input))\n        .run(scope);\n      scope.throwIfCanceled();\n      const auctionHouse = await this.findAuctionHouseByAddress(\n        output.auctionHouse\n      ).run(scope);\n      return { ...output, auctionHouse };\n    });\n  }\n\n  updateAuctionHouse(\n    auctionHouse: AuctionHouse,\n    input: Omit<UpdateAuctionHouseInput, 'auctionHouse'>\n  ): Task<\n    UpdateAuctionHouseOutput & {\n      auctionHouse: AuctionHouse;\n    }\n  > {\n    return new Task(async (scope) => {\n      const output = await this.metaplex\n        .operations()\n        .getTask(updateAuctionHouseOperation({ auctionHouse, ...input }))\n        .run(scope);\n      scope.throwIfCanceled();\n      const updatedAuctionHouse = await this.findAuctionHouseByAddress(\n        auctionHouse.address\n      ).run(scope);\n      return { ...output, auctionHouse: updatedAuctionHouse };\n    });\n  }\n\n  findAuctionHouseByAddress(\n    address: PublicKey,\n    commitment?: Commitment\n  ): Task<AuctionHouse> {\n    return this.metaplex\n      .operations()\n      .getTask(findAuctionHouseByAddressOperation({ address, commitment }));\n  }\n\n  findAuctionHouseByCreatorAndMint(\n    creator: PublicKey,\n    treasuryMint: PublicKey,\n    commitment?: Commitment\n  ): Task<AuctionHouse> {\n    return this.findAuctionHouseByAddress(\n      findAuctionHousePda(creator, treasuryMint),\n      commitment\n    );\n  }\n}\n"],"names":["AuctionHouseClient","constructor","metaplex","builders","AuctionHouseBuildersClient","createAuctionHouse","input","Task","scope","output","operations","getTask","createAuctionHouseOperation","run","throwIfCanceled","auctionHouse","findAuctionHouseByAddress","updateAuctionHouse","updateAuctionHouseOperation","updatedAuctionHouse","address","commitment","findAuctionHouseByAddressOperation","findAuctionHouseByCreatorAndMint","creator","treasuryMint","findAuctionHousePda"],"mappings":";;;;;;;;;;;AAkBO,MAAMA,kBAAN,CAAyB;EAC9BC,WAAW,CAAoBC,QAApB,EAAwC;IAAA,IAApBA,CAAAA,QAAoB,GAApBA,QAAoB,CAAA;AAAE,GAAA;;AAErDC,EAAAA,QAAQ,GAAG;AACT,IAAA,OAAO,IAAIC,qDAAJ,CAA+B,IAAA,CAAKF,QAApC,CAAP,CAAA;AACD,GAAA;;EAEDG,kBAAkB,CAACC,KAAD,EAIhB;AACA,IAAA,OAAO,IAAIC,SAAJ,CAAS,MAAOC,KAAP,IAAiB;AAC/B,MAAA,MAAMC,MAAM,GAAG,MAAM,KAAKP,QAAL,CAClBQ,UADkB,EAElBC,CAAAA,OAFkB,CAEVC,8CAA2B,CAACN,KAAD,CAFjB,EAGlBO,GAHkB,CAGdL,KAHc,CAArB,CAAA;AAIAA,MAAAA,KAAK,CAACM,eAAN,EAAA,CAAA;AACA,MAAA,MAAMC,YAAY,GAAG,MAAM,IAAA,CAAKC,yBAAL,CACzBP,MAAM,CAACM,YADkB,CAAA,CAEzBF,GAFyB,CAErBL,KAFqB,CAA3B,CAAA;MAGA,OAAO,EAAE,GAAGC,MAAL;AAAaM,QAAAA,YAAAA;OAApB,CAAA;AACD,KAVM,CAAP,CAAA;AAWD,GAAA;;AAEDE,EAAAA,kBAAkB,CAChBF,YADgB,EAEhBT,KAFgB,EAOhB;AACA,IAAA,OAAO,IAAIC,SAAJ,CAAS,MAAOC,KAAP,IAAiB;MAC/B,MAAMC,MAAM,GAAG,MAAM,IAAKP,CAAAA,QAAL,CAClBQ,UADkB,EAElBC,CAAAA,OAFkB,CAEVO,8CAA2B,CAAC;QAAEH,YAAF;QAAgB,GAAGT,KAAAA;AAAnB,OAAD,CAFjB,CAAA,CAGlBO,GAHkB,CAGdL,KAHc,CAArB,CAAA;AAIAA,MAAAA,KAAK,CAACM,eAAN,EAAA,CAAA;AACA,MAAA,MAAMK,mBAAmB,GAAG,MAAM,IAAA,CAAKH,yBAAL,CAChCD,YAAY,CAACK,OADmB,CAAA,CAEhCP,GAFgC,CAE5BL,KAF4B,CAAlC,CAAA;MAGA,OAAO,EAAE,GAAGC,MAAL;AAAaM,QAAAA,YAAY,EAAEI,mBAAAA;OAAlC,CAAA;AACD,KAVM,CAAP,CAAA;AAWD,GAAA;;AAEDH,EAAAA,yBAAyB,CACvBI,OADuB,EAEvBC,UAFuB,EAGH;IACpB,OAAO,IAAA,CAAKnB,QAAL,CACJQ,UADI,GAEJC,OAFI,CAEIW,4DAAkC,CAAC;MAAEF,OAAF;AAAWC,MAAAA,UAAAA;AAAX,KAAD,CAFtC,CAAP,CAAA;AAGD,GAAA;;AAEDE,EAAAA,gCAAgC,CAC9BC,OAD8B,EAE9BC,YAF8B,EAG9BJ,UAH8B,EAIV;IACpB,OAAO,IAAA,CAAKL,yBAAL,CACLU,uCAAmB,CAACF,OAAD,EAAUC,YAAV,CADd,EAELJ,UAFK,CAAP,CAAA;AAID,GAAA;;AAhE6B;;;;"}