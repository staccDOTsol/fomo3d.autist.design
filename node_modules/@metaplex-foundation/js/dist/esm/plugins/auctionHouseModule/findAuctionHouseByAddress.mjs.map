{"version":3,"file":"findAuctionHouseByAddress.mjs","sources":["../../../../src/plugins/auctionHouseModule/findAuctionHouseByAddress.ts"],"sourcesContent":["import type { Commitment, PublicKey } from '@solana/web3.js';\nimport type { Metaplex } from '@/Metaplex';\nimport { useOperation, Operation, OperationHandler } from '@/types';\nimport { parseAuctionHouseAccount } from '@/programs';\nimport { AuctionHouse } from './AuctionHouse';\nimport { AccountNotFoundError } from '@/errors';\n\n// -----------------\n// Operation\n// -----------------\n\nconst Key = 'FindAuctionHouseByAddressOperation' as const;\nexport const findAuctionHouseByAddressOperation =\n  useOperation<FindAuctionHouseByAddressOperation>(Key);\nexport type FindAuctionHouseByAddressOperation = Operation<\n  typeof Key,\n  FindAuctionHouseByAddressOperationInput,\n  AuctionHouse\n>;\n\nexport type FindAuctionHouseByAddressOperationInput = {\n  address: PublicKey;\n  commitment?: Commitment;\n};\n\n// -----------------\n// Handler\n// -----------------\n\nexport const findAuctionHouseByAddressOperationHandler: OperationHandler<FindAuctionHouseByAddressOperation> =\n  {\n    handle: async (\n      operation: FindAuctionHouseByAddressOperation,\n      metaplex: Metaplex\n    ) => {\n      const { address, commitment } = operation.input;\n      const unparsedAccount = await metaplex\n        .rpc()\n        .getAccount(address, commitment);\n\n      if (!unparsedAccount.exists) {\n        throw new AccountNotFoundError(address, 'AuctionHouse');\n      }\n\n      const account = parseAuctionHouseAccount(unparsedAccount);\n\n      return new AuctionHouse(account);\n    },\n  };\n"],"names":["Key","findAuctionHouseByAddressOperation","useOperation","findAuctionHouseByAddressOperationHandler","handle","operation","metaplex","address","commitment","input","unparsedAccount","rpc","getAccount","exists","AccountNotFoundError","account","parseAuctionHouseAccount","AuctionHouse"],"mappings":";;;;;AAQA;AACA;;AAEA,MAAMA,GAAG,GAAG,oCAAZ,CAAA;MACaC,kCAAkC,GAC7CC,YAAY,CAAqCF,GAArC,EADP;AAaP;AACA;AACA;AAEO,MAAMG,yCAA+F,GAC1G;AACEC,EAAAA,MAAM,EAAE,OACNC,SADM,EAENC,QAFM,KAGH;IACH,MAAM;MAAEC,OAAF;AAAWC,MAAAA,UAAAA;KAAeH,GAAAA,SAAS,CAACI,KAA1C,CAAA;AACA,IAAA,MAAMC,eAAe,GAAG,MAAMJ,QAAQ,CACnCK,GAD2B,EAE3BC,CAAAA,UAF2B,CAEhBL,OAFgB,EAEPC,UAFO,CAA9B,CAAA;;AAIA,IAAA,IAAI,CAACE,eAAe,CAACG,MAArB,EAA6B;AAC3B,MAAA,MAAM,IAAIC,oBAAJ,CAAyBP,OAAzB,EAAkC,cAAlC,CAAN,CAAA;AACD,KAAA;;AAED,IAAA,MAAMQ,OAAO,GAAGC,wBAAwB,CAACN,eAAD,CAAxC,CAAA;AAEA,IAAA,OAAO,IAAIO,YAAJ,CAAiBF,OAAjB,CAAP,CAAA;AACD,GAAA;AAjBH;;;;"}